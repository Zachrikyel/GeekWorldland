/* ========== RESPONSIVE FIXES: PROTOCOLO FINAL (FUSIÓN V6.0) ========== */
/* Incluye: Menú Compacto, Rescate de Vaca, Unlock Terminal y Scrolls Horizontales */

/* ===========================================================
   1. HEADER & MENÚ COMPACTO (Solución para no tapar botones)
   =========================================================== */
@media screen and (max-width: 992px) {

    /* 1. OCULTAR ICONOS DEL HEADER (Lupa, Mundo, Login) EN MÓVIL */
    /* Esto limpia el espacio para que no se encimen con la hamburguesa */
    .header-actions .action-btn {
        display: none !important;
    }

    /* 2. MOSTRAR SOLO LA HAMBURGUESA */
    /* Usamos el ID o la clase específica para forzar su aparición */
    .header-actions .menu-toggle,
    #menuToggle {
        display: flex !important;
        position: relative !important;
        z-index: 10005 !important;
        /* Encima del header */
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.1);
        /* Fondo sutil para verlo */
        border-radius: 8px;
        justify-content: center;
        align-items: center;
        margin-left: auto;
        /* Empujar a la derecha */
    }

    .menu-toggle span {
        background: #fff !important;
        /* Líneas blancas fuertes */
        height: 3px !important;
        width: 25px !important;
        margin: 5px 0 !important;
    }

    /* 3. LA CAJA DEL MENÚ DESPLEGABLE */
    .nav-left {
        position: fixed !important;
        top: 90px;
        right: -120%;
        /* Oculto completamente */
        width: 280px !important;
        height: auto !important;
        max-height: 80vh;
        background: rgba(15, 15, 35, 0.98) !important;
        backdrop-filter: blur(20px);
        border: 1px solid var(--primary-cyan);
        border-radius: 15px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
        flex-direction: column;
        justify-content: flex-start;
        padding: 30px 20px !important;
        transition: right 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
        z-index: 10000 !important;
        overflow-y: auto;
    }

    .nav-left.active {
        right: 15px !important;
        /* Aparece flotando a la derecha */
    }

    .nav-link {
        width: 100%;
        font-size: 1.2rem !important;
        margin: 10px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        padding-bottom: 10px;
        display: flex;
        justify-content: flex-start;
    }
}

/* ===========================================================
   2. HERO SECTION (Estático y Centrado)
   =========================================================== */
@media screen and (max-width: 968px) {
    .carousel {
        height: 100vh;
        min-height: 600px;
        overflow: hidden;
        margin-top: 0;
        background: #000;
        position: relative;
    }

    .carousel .list {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        top: 0;
        left: 0;
        transform: none;
    }

    /* Inhibidor de animaciones */
    .carousel .list .item,
    .carousel.next .item,
    .carousel.prev .item {
        width: 100% !important;
        height: 100% !important;
        position: absolute;
        inset: 0;
        border-radius: 0;
        animation: none !important;
        transition: opacity 0.5s ease-in-out;
        opacity: 0;
        z-index: 1;
        transform: none !important;
    }

    /* Item Activo */
    .carousel .list .item:nth-child(2) {
        opacity: 1 !important;
        z-index: 10;
    }

    /* IMAGEN CENTRADA */
    .carousel .list .item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        /* Ajusta este valor si quieres subir o bajar el foco de la imagen */
        object-position: center -160px !important;
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.6;
        transform: none !important;
    }

    /* TEXTO HERO */
    .carousel .list .item .introduce {
        position: absolute;
        bottom: 15%;
        left: 0;
        width: 100%;
        padding: 20px;
        text-align: center;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
        transform: none !important;
        opacity: 1 !important;
        animation: none !important;
        z-index: 5;
    }

    .introduce .topic {
        font-size: 2.2rem !important;
        line-height: 1.1;
    }

    .introduce .des {
        font-size: 1rem !important;
        -webkit-line-clamp: 4;
        line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
        display: -webkit-box;
    }
}

/* ===========================================================
   3. HOME FOLDERS (Scroll Horizontal Swipe)
   =========================================================== */
@media screen and (max-width: 1100px) {
    .folders-container-linear {
        display: flex !important;
        flex-direction: row !important;
        /* Horizontal */
        flex-wrap: nowrap !important;
        /* No bajar línea */
        overflow-x: auto !important;
        /* Scroll activado */
        justify-content: flex-start !important;
        align-items: flex-start;
        padding: 20px 20px 40px 20px !important;
        gap: 20px;
        width: 100%;
        -webkit-overflow-scrolling: touch;
    }

    .glass-folder {
        min-width: 280px !important;
        /* Ancho fijo para que no se aplasten */
        max-width: 280px !important;
        margin: 0 !important;
        transform: none !important;
        flex-shrink: 0;
        /* Evitar que se encojan */
    }

    /* Estilizar barra scroll horizontal */
    .folders-container-linear::-webkit-scrollbar {
        height: 4px;
    }

    .folders-container-linear::-webkit-scrollbar-thumb {
        background: var(--primary-cyan);
        border-radius: 10px;
    }
}

/* ===========================================================
   4. ARSENAL CATEGORÍAS (Scroll Horizontal Swipe)
   =========================================================== */
@media screen and (max-width: 968px) {

    /* Contenedor Padre de la fila */
    .acp-categories-row {
        display: flex !important;
        flex-direction: row !important;
        align-items: center;
        gap: 10px;
        width: 100%;
        overflow: hidden;
        /* Evita scroll general, lo delegamos al hijo */
        padding: 0 10px;
    }

    /* El área que debe hacer scroll (donde están las cartas) */
    .acp-scroll-area {
        display: flex !important;
        flex-direction: row !important;
        /* Fila obligatoria */
        flex-wrap: nowrap !important;
        /* PROHIBIDO bajar de línea */
        overflow-x: auto !important;
        /* Scroll horizontal ACTIVADO */
        gap: 15px;
        width: 100%;
        padding: 10px 5px;
        -webkit-overflow-scrolling: touch;
        /* Suavidad en iOS */
        scroll-behavior: smooth;
    }

    /* Las tarjetas de categoría dentro del scroll */
    .acp-scroll-area .geek-card {
        min-width: 160px !important;
        /* Ancho fijo para obligar scroll */
        max-width: 160px !important;
        height: auto !important;
        margin: 0 !important;
        flex-shrink: 0;
        /* Evita que se aplasten */
    }

    /* Ajustes internos de la tarjeta para móvil */
    .geek-card .content h2 {
        font-size: 1rem !important;
    }

    .geek-card .content ul {
        display: none;
        /* Opcional: Ocultar sublistas en la vista previa para ahorrar espacio */
    }

    /* Ocultar botones laterales si estorban (Lupa y Reset) */
    .geek-card.search-card,
    .geek-card.reset-card {
        min-width: 50px !important;
        width: 50px !important;
        padding: 0 !important;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Barra de scroll estilizada */
    .acp-scroll-area::-webkit-scrollbar {
        height: 4px;
    }

    .acp-scroll-area::-webkit-scrollbar-thumb {
        background: var(--primary-cyan);
        border-radius: 10px;
    }
}

@media screen and (max-width: 968px) {
    .acp-slider-wrapper {
        display: none !important;
    }
}

/* 2. GESTIÓN DE ICONOS HEADER VS MENÚ */
@media screen and (max-width: 992px) {

    /* Ocultar los botones originales del header (Lupa, Mundo, User) */
    .header-actions .action-btn {
        display: none !important;
    }

    /* Asegurar que la Hamburguesa sea el ÚNICO rey */
    .menu-toggle {
        display: flex !important;
        margin-left: auto;
        /* Empujar a la derecha */
        z-index: 20002 !important;
    }

    /* Mostrar los nuevos enlaces móviles que agregaremos con JS */
    .nav-link.mobile-only-link {
        display: flex !important;
        /* Se muestran en el menú desplegable */
        color: var(--primary-cyan) !important;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        margin-top: 10px;
        padding-top: 15px;
    }
}

/* En escritorio, esos enlaces nuevos NO deben existir */
@media screen and (min-width: 993px) {
    .nav-link.mobile-only-link {
        display: none !important;
    }
}

/* 3. CORRECCIÓN CARRUSEL CATEGORÍAS (Arsenal) */
@media screen and (max-width: 968px) {
    .acp-scroll-area {
        display: flex !important;
        flex-wrap: nowrap !important;
        /* Obligar fila india */
        overflow-x: auto !important;
        /* Permitir deslizar */
        justify-content: flex-start !important;
        width: 100%;
        padding-bottom: 10px;
        -webkit-overflow-scrolling: touch;
        gap: 15px;
    }

    /* Asegurar que las tarjetas no se encojan */
    .acp-scroll-area .geek-card {
        min-width: 160px !important;
        flex-shrink: 0 !important;
    }
}

/* ===========================================================
   5. FOOTER & VACA (Rescate V4.0)
   =========================================================== */
.footer {
    overflow: visible !important;
    position: relative;
    z-index: 5;
    margin-top: 300px !important;
    /* Espacio para animación */
}

/* Escenario Parallax */
.footer__parralax {
    top: -300px !important;
    height: 300px !important;
    width: 100%;
    overflow: hidden;
    z-index: 1;
    pointer-events: none;
    visibility: visible !important;
    opacity: 1 !important;
}

/* La Vaca / Coche */
.footer__parralax-voiture {
    z-index: 10 !important;
    visibility: visible !important;
    opacity: 1 !important;
    bottom: 0 !important;
}

@media screen and (max-width: 768px) {

    /* Logo Footer */
    .footer-logo {
        transform: none !important;
        margin: 0 auto 20px auto !important;
        display: block;
        max-width: 180px;
    }

    .footer__columns {
        text-align: center;
        display: flex;
        flex-direction: column;
    }

    /* Logo primero */
    .footer__col.center-col {
        order: -1;
    }
}

/* ===========================================================
   6. TERMINAL TRANSACCIONAL (Unlock Scroll V4.0)
   =========================================================== */
@media screen and (max-width: 1100px) {

    /* IMPORTANTE: Permitir scroll en body */
    body {
        overflow-y: auto !important;
        overflow-x: hidden;
        height: auto !important;
        position: static !important;
    }

    .checkout-container {
        display: flex;
        flex-direction: column;
        height: auto !important;
        overflow: visible !important;
        padding-bottom: 50px;
        margin-top: 20px;
    }

    .checkout-section {
        height: auto !important;
        overflow: visible !important;
    }

    .form-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }

    .input-group,
    .full-width,
    .half-width {
        width: 100% !important;
    }

    input,
    select,
    textarea {
        font-size: 16px !important;
    }

    .checkout-section.order-summary {
        order: 1;
        margin-bottom: 30px;
    }
}

/* ===========================================================
   7. AJUSTES VARIOS UI
   =========================================================== */
@media screen and (max-width: 1100px) {
    .mib-card {
        width: 92% !important;
        max-width: 450px;
        margin: 0 auto 30px auto;
    }

    .access-row {
        flex-direction: column;
    }

    .reverse-layout {
        flex-direction: column-reverse;
    }
}

/* Zylox Menu (Flotante no intrusivo) */
.ufo-container {
    pointer-events: none;
    z-index: 9000;
}

.ufo-toggle {
    pointer-events: auto;
}

@media screen and (max-width: 480px) {
    .ufo-container {
        bottom: 15px;
        right: 15px;
    }

    .ufo-menu {
        width: 200px;
        height: 200px;
    }
}